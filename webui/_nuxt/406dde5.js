(window.webpackJsonp=window.webpackJsonp||[]).push([[3,4],{299:function(e,t,n){"use strict";n.r(t);var r=n(4),o=(n(48),{props:{config:{type:Object,default:null},stopRec:{type:Function,default:null}},data:function(){return{notify:this.config.notify.notifyOn,record:this.config.record,danmu:this.config.danmu}},watch:{config:function(e,t){this.notify=this.config.notify.notifyOn,this.record=this.config.record,this.danmu=this.config.danmu}},methods:{changeNotify:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="",!e){n.next=7;break}return n.next=4,fetch("http://localhost:51880/addnotifyon/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 4:r=n.sent,n.next=10;break;case 7:return n.next=9,fetch("http://localhost:51880/delnotifyon/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 9:r=n.sent;case 10:!0!==r&&console.error("changeNotify返回错误：".concat(r));case 11:case"end":return n.stop()}}),n)})))()},changeRecord:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="",!e){n.next=7;break}return n.next=4,fetch("http://localhost:51880/addrecord/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 4:r=n.sent,n.next=10;break;case 7:return n.next=9,fetch("http://localhost:51880/delrecord/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 9:r=n.sent;case 10:!0!==r&&console.error("changeRecord返回错误：".concat(r));case 11:case"end":return n.stop()}}),n)})))()},changeDanmu:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="",!e){n.next=7;break}return n.next=4,fetch("http://localhost:51880/adddanmu/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 4:r=n.sent,n.next=10;break;case 7:return n.next=9,fetch("http://localhost:51880/deldanmu/"+t.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 9:r=n.sent;case 10:!0!==r&&console.error("changeDanmu返回错误：".concat(r));case 11:case"end":return n.stop()}}),n)})))()},deleteLive:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.config.isRecord&&e.stopRec(e.config.uid),t.next=3,fetch("http://localhost:51880/delconfig/"+e.config.uid).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 3:!0!==(n=t.sent)&&console.error("deleteLive返回错误：".concat(n));case 5:case"end":return t.stop()}}),t)})))()}}}),c=n(37),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative",top:"8px"}},[n("el-checkbox",{attrs:{label:"开播提醒"},on:{change:e.changeNotify},model:{value:e.notify,callback:function(t){e.notify=t},expression:"notify"}}),e._v(" "),n("el-checkbox",{attrs:{label:"自动录播"},on:{change:e.changeRecord},model:{value:e.record,callback:function(t){e.record=t},expression:"record"}}),e._v(" "),n("el-checkbox",{attrs:{label:"自动下载弹幕"},on:{change:e.changeDanmu},model:{value:e.danmu,callback:function(t){e.danmu=t},expression:"danmu"}}),e._v(" "),n("el-popconfirm",{attrs:{icon:"el-icon-info","icon-color":"red",title:"确定删除 "+e.config.name+"（"+e.config.uid+"） 的设置？"},on:{confirm:e.deleteLive}},[n("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{slot:"reference",size:"small"},slot:"reference"},[e._v("\n      删除主播\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports},301:function(e,t,n){"use strict";n.r(t);var r=n(4),o=(n(48),n(39),n(38),{data:function(){return{lives:[],timer:""}},created:function(){var e=this;this.getLive(),this.timer=setInterval((function(){e.getLive()}),1e4)},beforeDestroy:function(){this.cancelTimer()},methods:{getLive:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:51880/liststreamer").then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return n=t.t0,t.next=8,fetch("http://localhost:51880/listlive").then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1=[];case 11:return r=t.t1,t.next=14,fetch("http://localhost:51880/listrecord").then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 14:if(t.t2=t.sent,t.t2){t.next=17;break}t.t2=[];case 17:o=t.t2,(n=n.map((function(e){return r.map((function(t){return t.uid===e.uid&&(e.isLive=!0,e.title=t.title,e.url=t.url),t})),e.isRecord=o.filter((function(t){return t.uid===e.uid})).length>0,e}))).sort((function(a,b){return a.isLive&&b.isLive?a.uid<b.uid?-1:1:a.isLive||b.isLive?a.isLive&&!b.isLive?-1:1:a.uid<b.uid?-1:1})),e.lives=n;case 21:case"end":return t.stop()}}),t)})))()},cancelTimer:function(){clearInterval(this.timer)},startRecord:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:51880/startrecdan/"+e).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 2:!0!==(n=t.sent)&&console.error("startRecord返回错误：".concat(n));case 4:case"end":return t.stop()}}),t)})))()},stopRecord:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:51880/stoprecord/"+e).then((function(e){return e.json()})).catch((function(e){return console.error(e)}));case 2:!0!==(n=t.sent)&&console.error("stopRecord返回错误：".concat(n));case 4:case"end":return t.stop()}}),t)})))()}}}),c=n(37),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-collapse",{attrs:{accordion:""}},e._l(e.lives,(function(t){return n("el-collapse-item",{key:t.uid},[n("template",{slot:"title"},[n("span",{style:t.isLive?"color: black":"color:grey"},[e._v("\n        "+e._s(t.name)+"（"+e._s(t.uid)+"）\n      ")]),e._v(" "),t.isLive?n("span",[e._v("：")]):e._e(),e._v(" "),t.isLive?n("el-link",{attrs:{type:"primary",href:t.url,target:"_blank"}},[e._v("\n        "+e._s(t.title)+"\n      ")]):e._e(),e._v(" "),t.isRecord?n("span",{staticStyle:{color:"red"}},[e._v("（正在录播）")]):e._e(),e._v(" "),t.isRecord?n("span",{staticStyle:{position:"absolute",right:"30px"}},[n("el-popconfirm",{attrs:{icon:"el-icon-info","icon-color":"red",title:"确定停止 "+t.name+"（"+t.uid+"） 的录播？"},on:{confirm:function(n){return e.stopRecord(t.uid)}}},[n("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[e._v("\n            停止录播\n          ")])],1)],1):t.isLive?n("span",{staticStyle:{position:"absolute",right:"30px"}},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.startRecord(t.uid)}}},[e._v("\n          启动录播\n        ")])],1):e._e()],1),e._v(" "),n("LiveConfig",{attrs:{config:t,"stop-rec":e.stopRecord}})],2)})),1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LiveConfig:n(299).default})}}]);